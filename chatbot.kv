<ChatMessage@MDCard>:
    size_hint_y: None
    height: self.minimum_height
    padding: "12dp"
    md_bg_color: (0.25, 0.25, 0.25, 1) if root.is_user else (0.94, 0.94, 0.94, 1)
    radius: [15, 15, 0, 15] if root.is_user else [15, 15, 15, 0]
    elevation: 1

    MDLabel:
        text: root.text
        size_hint_y: None
        height: self.texture_size[1]
        text_size: (self.width, None)
        theme_text_color: "Custom"
        text_color: (1, 1, 1, 1) if root.is_user else (0, 0, 0, 1)

BoxLayout:
    orientation: 'vertical'

    MDTopAppBar:
        title: "Assistente Clínico"
        elevation: 2
        md_bg_color: app.theme_cls.primary_color

    ScrollView:
        id: historico_chat_scroll
        bar_width: '10dp'
        GridLayout:
            id: historico_chat
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            padding: "10dp"
            spacing: "15dp"

    MDSeparator:
        height: "1dp"

    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        height: "60dp"
        padding: "10dp"
        spacing: "10dp"
        MDTextField:
            id: caixa_de_texto
            hint_text: 'Faça uma pergunta...'
            mode: "fill"
            fill_color_normal: (0.9, 0.9, 0.9, 1)
            text_color_normal: (0.25, 0.25, 0.25, 1)
            text_color_focus: (0.25, 0.25, 0.25, 1)
            on_text_validate: app.enviar_mensagem()
        MDIconButton:
            icon: 'send-circle'
            theme_text_color: "Custom"
            text_color: app.theme_cls.primary_color
            on_press: app.enviar_mensagem()